{
    "workflow_name": "Distance to nearest metro station",
    "task_statement": "计算每个建筑到最近地铁站点的直线距离。",
    "arcgis_context": { "workspace": "project.gdb", "coordinate_system": "projected", "linear_unit": "meters", "area_unit": "square_meters" },
    "inputs": [
        { "layer_name": "building", "geometry_type": "polygon", "required_fields": ["building_id"] },
        { "layer_name": "metro_station", "geometry_type": "point", "required_fields": ["station_id"] }
    ],
    "steps": [
        {
            "step_id": "S1",
            "tool": "Spatial Join",
            "purpose": "找到最近的地铁站并计算距离",
            "parameters": {
                "target_features": "building",
                "join_features": "metro_station",
                "join_operation": "JOIN_ONE_TO_ONE",
                "match_option": "CLOSEST",
                "distance_field_name": "dist_to_metro"
            },
            "inputs": [{"source": "input", "layer_name": "building"}, {"source": "input", "layer_name": "metro_station"}],
            "outputs": [{ "name": "building_with_dist", "type": "feature_class", "geometry_type": "polygon", "new_fields": ["dist_to_metro"], "path_hint": "project.gdb/building_with_dist" }],
            "qc_checks": [{"check": "距离应为正数", "how": "min(dist_to_metro)", "pass_condition": ">=0"}]
        }
    ],
    "outputs": [{ "name": "building_with_dist", "type": "feature_class", "geometry_type": "polygon", "fields": ["building_id", "dist_to_metro"], "description": "每个建筑到最近地铁站的距离" }],
    "assumptions": ["计算结果单位为 meters"]
}